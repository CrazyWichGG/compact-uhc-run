#detect ammo
execute as @a at @s store result score @s custom-gun-having-sniper-ammo run clear @s *[custom_data~{custom_item_group:ammo,custom_item:sniper_ammo}] 0

#reload
# -not holding empty gun
execute as @a at @s unless items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",gun_properties:{has_ammo:false}}] run scoreboard players set @s custom-gun-reloading -1

# -no ammo
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-having-sniper-ammo matches 0 run scoreboard players set @s custom-gun-reloading -1

# -reload disturb
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-is-scoping matches 1.. if score @s custom-gun-having-sniper-ammo matches 1.. run scoreboard players set @s custom-gun-reloading -1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-is-scoping matches 1.. if score @s custom-gun-having-sniper-ammo matches 1.. run title @s actionbar [{"text":"Reload Disturbed!","color":"red"}]

# -reloading
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-is-scoping matches 0 if score @s custom-gun-having-sniper-ammo matches 1.. if score @s custom-gun-reloading matches -1 run scoreboard players set @s custom-gun-reloading 60
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-is-scoping matches 0 if score @s custom-gun-having-sniper-ammo matches 1.. run scoreboard players remove @s custom-gun-reloading 1

# -reloaded
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-reloading matches 0 run clear @s *[custom_data~{custom_item_group:ammo,custom_item:sniper_ammo}] 1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-reloading matches 0 run playsound entity.experience_orb.pickup master @s ~ ~ ~ 1 1 1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-reloading matches 0 run item modify entity @s weapon.mainhand system:custom/gun/sniper_loaded_ammo

# -actionbar
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-having-sniper-ammo matches 0 run title @s actionbar [{"text":"No Ammo!","color":"red"}]
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:false}}] if score @s custom-gun-reloading matches 1.. run title @s actionbar [{"text":"Reloading...","color":"yellow"},{"text":" ","color":"white"},{"text":"[","color":"white"},{"score": {"name":"@s","objective":"custom-gun-reloading"},"color":"white"},{"text":"]","color":"white"}]
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:true}}] if score @s custom-gun-reloading matches 0 run title @s actionbar [{"text":"Reloaded!","color":"green"}]


# I don't even know what am I doing from this on, but it works ;)
# (NOTICE: use score match 0 instead of match 1 to take one time action, usable because rely on 2 condition scoreboard)
#offhand handler
# - holding sniper gun
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 0 run item replace entity @s enderchest.1 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 0 unless items entity @s weapon.offhand *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] if score old-combat custom matches 0 run loot replace entity @s weapon.offhand loot system:inventory_handler/custom/gun/offhand_item_replace

# - mainhand (shoot)
execute as @a at @s if items entity @s weapon.offhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper",gun_properties:{has_ammo:1b}}] if items entity @s weapon.mainhand *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run function system:custom-active/gun/raycast/sniper/start

# - not holding sniper gun
# -- offhand
execute as @a at @s if items entity @s weapon.offhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if items entity @s weapon.mainhand *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] if score @s custom-gun-is-not-holding-gun matches 0 unless items entity @s enderchest.1 *[custom_data~{inventory-handler:1b}] run item replace entity @s weapon.mainhand from entity @s enderchest.1
execute as @a at @s if items entity @s weapon.offhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if items entity @s weapon.mainhand *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] if score @s custom-gun-is-not-holding-gun matches 0 unless items entity @s enderchest.1 *[custom_data~{inventory-handler:1b}] run item replace entity @s enderchest.1 with air
# -- other slots
execute as @a at @s unless items entity @s weapon.offhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] unless items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-not-holding-gun matches 0 unless items entity @s enderchest.1 *[custom_data~{inventory-handler:1b}] run item replace entity @s weapon.offhand from entity @s enderchest.1
execute as @a at @s unless items entity @s weapon.offhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] unless items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-not-holding-gun matches 0 unless items entity @s enderchest.1 *[custom_data~{inventory-handler:1b}] run item replace entity @s enderchest.1 with air
# --delete offhand replace item
execute as @a at @s unless items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-not-holding-gun matches 0 if score ingame game-state matches 1 if score old-combat custom matches 0 run clear @s *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}]
execute as @a at @s unless items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-not-holding-gun matches 0 if score ingame game-state matches 0 run clear @s *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}]

# --notify
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. unless items entity @s weapon.offhand *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run playsound block.note_block.bass master @s ~ ~ ~ 1 0 1
#execute as @a at @s unless items entity @s weapon.offhand *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run tellraw @s {"text":"You cannot change your offhand item!","color":"red"}
# --hotbar 0
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.0
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.0 from entity @s enderchest.0
# --hotbar 1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.1 from entity @s enderchest.0
# --hotbar 2
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.2
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.2 from entity @s enderchest.0
# --hotbar 3
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.3
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.3 from entity @s enderchest.0
# --hotbar 4
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.4 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.4 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.4
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.4 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.4 from entity @s enderchest.0
# --hotbar 5
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.5 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.5 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.5
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.5 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.5 from entity @s enderchest.0
# --hotbar 6
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.6 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.6 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.6
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.6 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.6 from entity @s enderchest.0
# --hotbar 7
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.7 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.7 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.7
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.7 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.7 from entity @s enderchest.0
# --hotbar 8
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.8 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.8 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s hotbar.8
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s hotbar.8 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s hotbar.8 from entity @s enderchest.0
# --inventory 0
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.0
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.0 from entity @s enderchest.0
# --inventory 1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.1 from entity @s enderchest.0
# --inventory 2
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.2
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.2 from entity @s enderchest.0
# --inventory 3
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.3
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.3 from entity @s enderchest.0
# --inventory 4
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.4 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.4 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.4
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.4 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.4 from entity @s enderchest.0
# --inventory 5
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.5 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.5 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.5
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.5 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.5 from entity @s enderchest.0
# --inventory 6
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.6 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.6 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.6
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.6 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.6 from entity @s enderchest.0
# --inventory 7
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.7 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.7 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.7
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.7 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.7 from entity @s enderchest.0
# --inventory 8
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.8 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.8 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.8
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.8 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.8 from entity @s enderchest.0
# --inventory 9
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.9 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.9 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.9
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.9 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.9 from entity @s enderchest.0
# --inventory 10
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.10 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.10 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.10
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.10 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.10 from entity @s enderchest.0
# --inventory 11
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.11 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.11 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.11
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.11 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.11 from entity @s enderchest.0
# --inventory 12
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.12 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.12 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.12
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.12 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.12 from entity @s enderchest.0
# --inventory 13
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.13 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.13 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.13
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.13 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.13 from entity @s enderchest.0
# --inventory 14
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.14 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.14 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.14
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.14 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.14 from entity @s enderchest.0
# --inventory 15
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.15 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.15 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.15
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.15 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.15 from entity @s enderchest.0
# --inventory 16
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.16 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.16 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.16
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.16 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.16 from entity @s enderchest.0
# --inventory 17
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.17 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.17 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.17
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.17 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.17 from entity @s enderchest.0
# --inventory 18
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.18 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.18 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.18
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.18 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.18 from entity @s enderchest.0
# --inventory 19
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.19 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.19 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.19
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.19 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.19 from entity @s enderchest.0
# --inventory 20
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.20 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.20 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.20
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.20 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.20 from entity @s enderchest.0
# --inventory 21
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.21 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.21 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.21
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.21 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.21 from entity @s enderchest.0
# --inventory 22
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.22 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.22 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.22
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.22 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.22 from entity @s enderchest.0
# --inventory 23
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.23 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.23 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.23
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.23 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.23 from entity @s enderchest.0
# --inventory 24
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.24 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.24 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.24
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.24 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.24 from entity @s enderchest.0
# --inventory 25
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.25 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.25 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.25
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.25 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.25 from entity @s enderchest.0
# --inventory 26
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.26 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.26 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s inventory.26
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s inventory.26 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s inventory.26 from entity @s enderchest.0
# --crafting 0
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s player.crafting.0
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.0 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s player.crafting.0 from entity @s enderchest.0
# --crafting 1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s player.crafting.1
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.1 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s player.crafting.1 from entity @s enderchest.0
# --crafting 2
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s player.crafting.2
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.2 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s player.crafting.2 from entity @s enderchest.0
# --crafting 3
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s player.crafting.3
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.crafting.3 *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s player.crafting.3 from entity @s enderchest.0
# --cursor
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.cursor *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s enderchest.0 from entity @s weapon.offhand
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.cursor *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s weapon.offhand from entity @s player.cursor
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. if items entity @s player.cursor *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] run item replace entity @s player.cursor from entity @s enderchest.0

# --thrown
# ---if ingame, check for old-combat
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. unless items entity @s container.* *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] if score ingame game-state matches 1 if score old-combat custom matches 0 run loot replace entity @s weapon.offhand loot system:inventory_handler/custom/gun/offhand_item_replace
# ---if not ingame, do not check for old-combat
execute as @a at @s if items entity @s weapon.mainhand spyglass[custom_data~{custom_item_group:"gun",custom_item:"sniper"}] if score @s custom-gun-is-holding-gun matches 1.. unless items entity @s container.* *[custom_data~{inventory-handler:1b,inventory_handler_type:ingame}] if score ingame game-state matches 0 run loot replace entity @s weapon.offhand loot system:inventory_handler/custom/gun/offhand_item_replace
